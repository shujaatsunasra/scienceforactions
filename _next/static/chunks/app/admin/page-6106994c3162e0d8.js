(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{83:(e,t,i)=>{Promise.resolve().then(i.bind(i,5235)),Promise.resolve().then(i.bind(i,9562))},5235:(e,t,i)=>{"use strict";i.d(t,{default:()=>l});var a=i(5155),o=i(2115),n=i(5674),s=i(2099);class r{async initializeDatabase(){console.log("\uD83D\uDE80 Initializing Supabase database...");try{if(!await this.checkConnection())throw Error("Unable to connect to Supabase database");await this.generateInitialData(),console.log("✅ Database initialization complete!")}catch(e){throw console.error("❌ Database initialization failed:",e),e}}async checkConnection(){try{let{data:e,error:t}=await s.ND.from("user_profiles").select("id").limit(1);return!t}catch(e){return console.error("Connection check failed:",e),!1}}async generateInitialData(){console.log("\uD83D\uDCCA Checking existing data...");let{count:e}=await s.ND.from("user_profiles").select("id",{count:"exact",head:!0}),{count:t}=await s.ND.from("action_items").select("id",{count:"exact",head:!0});if(console.log("Found ".concat(e||0," users and ").concat(t||0," actions")),t&&0!==t||(console.log("\uD83C\uDFAF Generating action items..."),await this.generateActionItems()),!e||e<100){console.log("\uD83D\uDC65 Generating synthetic users...");let t=Math.max(500-(e||0),0);await n.L.generateSyntheticUsers(t)}console.log("\uD83D\uDCC8 Database seeded with initial data")}async generateActionItems(){let e=[{title:"Join Local Climate Action Group",description:"Connect with community members taking action on climate change in your area.",category:"Environmental",difficulty:"easy",time_commitment:"2 hours",impact_level:"medium",organization:"Climate Action Network",tags:["climate","community","advocacy"]},{title:"Participate in Tree Planting Initiative",description:"Help restore local ecosystems by participating in community tree planting.",category:"Environmental",difficulty:"medium",time_commitment:"4 hours",impact_level:"high",organization:"Green City Initiative",tags:["environment","hands-on","restoration"]},{title:"Advocate for Renewable Energy Policy",description:"Contact representatives to support clean energy legislation.",category:"Environmental",difficulty:"easy",time_commitment:"30 minutes",impact_level:"medium",organization:"Clean Energy Coalition",tags:["policy","advocacy","energy"]},{title:"Volunteer at Local Food Bank",description:"Help distribute food to families in need in your community.",category:"Social Justice",difficulty:"easy",time_commitment:"3 hours",impact_level:"high",organization:"Community Food Network",tags:["hunger","volunteer","community"]},{title:"Support Criminal Justice Reform",description:"Join advocacy efforts for fair sentencing and prison reform.",category:"Social Justice",difficulty:"medium",time_commitment:"2 hours",impact_level:"medium",organization:"Justice Reform Coalition",tags:["justice","reform","advocacy"]},{title:"Mentor Youth in Underserved Communities",description:"Provide guidance and support to young people facing challenges.",category:"Social Justice",difficulty:"hard",time_commitment:"8 hours",impact_level:"high",organization:"Youth Empowerment Program",tags:["youth","mentoring","education"]},{title:"Tutor Students in STEM",description:"Help students succeed in science, technology, engineering, and math.",category:"Education",difficulty:"medium",time_commitment:"2 hours",impact_level:"high",organization:"STEM Education Alliance",tags:["education","tutoring","STEM"]},{title:"Advocate for Public School Funding",description:"Support increased funding for public education in your district.",category:"Education",difficulty:"easy",time_commitment:"1 hour",impact_level:"medium",organization:"Public Education Coalition",tags:["education","funding","policy"]},{title:"Donate Books to Local Libraries",description:"Support literacy by donating books to community libraries.",category:"Education",difficulty:"easy",time_commitment:"1 hour",impact_level:"low",organization:"Library Friends Network",tags:["literacy","books","community"]},{title:"Support Universal Healthcare Initiative",description:"Advocate for accessible healthcare for all community members.",category:"Healthcare",difficulty:"medium",time_commitment:"2 hours",impact_level:"high",organization:"Healthcare for All",tags:["healthcare","advocacy","policy"]},{title:"Volunteer at Community Health Clinic",description:"Assist healthcare workers in providing services to underserved populations.",category:"Healthcare",difficulty:"medium",time_commitment:"4 hours",impact_level:"high",organization:"Community Health Network",tags:["health","volunteer","clinic"]},{title:"Promote Mental Health Awareness",description:"Help reduce stigma and increase access to mental health resources.",category:"Healthcare",difficulty:"easy",time_commitment:"1 hour",impact_level:"medium",organization:"Mental Health Alliance",tags:["mental health","awareness","advocacy"]},{title:"Teach Digital Literacy to Seniors",description:"Help older adults navigate technology and stay connected.",category:"Technology",difficulty:"medium",time_commitment:"3 hours",impact_level:"medium",organization:"Digital Inclusion Project",tags:["technology","seniors","education"]},{title:"Advocate for Net Neutrality",description:"Support open internet policies that benefit all users.",category:"Technology",difficulty:"easy",time_commitment:"30 minutes",impact_level:"medium",organization:"Internet Freedom Coalition",tags:["internet","policy","rights"]},{title:"Support Digital Privacy Rights",description:"Advocate for stronger data protection and privacy laws.",category:"Technology",difficulty:"medium",time_commitment:"1 hour",impact_level:"medium",organization:"Privacy Rights Foundation",tags:["privacy","data","rights"]},{title:"Support Living Wage Campaign",description:"Advocate for fair wages that allow workers to meet basic needs.",category:"Economic",difficulty:"medium",time_commitment:"2 hours",impact_level:"high",organization:"Economic Justice Coalition",tags:["wages","workers","economy"]},{title:"Volunteer for Financial Literacy Program",description:"Teach community members about budgeting, saving, and investing.",category:"Economic",difficulty:"medium",time_commitment:"3 hours",impact_level:"medium",organization:"Financial Empowerment Network",tags:["finance","education","empowerment"]},{title:"Support Small Business Development",description:"Help local entrepreneurs start and grow their businesses.",category:"Economic",difficulty:"hard",time_commitment:"5 hours",impact_level:"high",organization:"Small Business Alliance",tags:["business","entrepreneurship","local"]},{title:"Register Voters in Your Community",description:"Help eligible citizens register to vote in upcoming elections.",category:"Political",difficulty:"easy",time_commitment:"3 hours",impact_level:"high",organization:"Voter Registration Drive",tags:["voting","democracy","civic"]},{title:"Attend Town Hall Meetings",description:"Participate in local government meetings to voice community concerns.",category:"Political",difficulty:"easy",time_commitment:"2 hours",impact_level:"medium",organization:"Civic Engagement Coalition",tags:["government","local","participation"]},{title:"Support Campaign Finance Reform",description:"Advocate for transparency and limits on political contributions.",category:"Political",difficulty:"medium",time_commitment:"1 hour",impact_level:"medium",organization:"Democracy Reform Initiative",tags:["campaign","reform","transparency"]},{title:"Volunteer with Habitat for Humanity",description:"Help build affordable housing for families in need.",category:"Community",difficulty:"hard",time_commitment:"8 hours",impact_level:"high",organization:"Habitat for Humanity",tags:["housing","building","volunteer"]},{title:"Advocate for Affordable Housing",description:"Support policies that increase access to affordable housing.",category:"Community",difficulty:"medium",time_commitment:"2 hours",impact_level:"high",organization:"Housing Justice Coalition",tags:["housing","affordability","policy"]},{title:"Organize Neighborhood Cleanup",description:"Coordinate community efforts to clean and beautify local areas.",category:"Community",difficulty:"medium",time_commitment:"4 hours",impact_level:"medium",organization:"Neighborhood Alliance",tags:["cleanup","beautification","community"]}];for(let t of e){let e=[{location:"Local",completion_count:Math.floor(1e3*Math.random())},{location:"Remote",completion_count:Math.floor(1500*Math.random())},{location:"New York, NY",completion_count:Math.floor(800*Math.random())},{location:"Los Angeles, CA",completion_count:Math.floor(600*Math.random())},{location:"Chicago, IL",completion_count:Math.floor(400*Math.random())}];for(let i=0;i<3;i++){let a=e[i%e.length],o={...t,title:"".concat(t.title," ").concat(i>0?"(".concat(i+1,")"):""),location:a.location,completion_count:a.completion_count,is_active:!0},{error:n}=await s.ND.from("action_items").insert([o]);n&&console.error("Error inserting action item:",n)}}console.log("✅ Generated ".concat(3*e.length," action items"))}async generateTestData(){console.log("\uD83E\uDDEA Generating test data...");try{await n.L.generateSyntheticUsers(100),await this.generateActionItems(),console.log("✅ Test data generated successfully")}catch(e){throw console.error("❌ Error generating test data:",e),e}}async clearDatabase(){console.log("\uD83D\uDDD1️ Clearing database...");try{await s.ND.from("user_actions").delete().neq("id","00000000-0000-0000-0000-000000000000"),await s.ND.from("user_sessions").delete().neq("id","00000000-0000-0000-0000-000000000000"),await s.ND.from("system_metrics").delete().neq("id","00000000-0000-0000-0000-000000000000"),await s.ND.from("action_items").delete().neq("id","00000000-0000-0000-0000-000000000000"),await s.ND.from("user_profiles").delete().neq("id","00000000-0000-0000-0000-000000000000"),console.log("✅ Database cleared")}catch(e){throw console.error("❌ Error clearing database:",e),e}}async getStats(){try{let[e,t,i,a]=await Promise.all([s.ND.from("user_profiles").select("id",{count:"exact",head:!0}),s.ND.from("action_items").select("id",{count:"exact",head:!0}),s.ND.from("user_actions").select("id",{count:"exact",head:!0}),s.ND.from("system_metrics").select("id",{count:"exact",head:!0})]);return{users:e.count||0,actions:t.count||0,user_actions:i.count||0,system_metrics:a.count||0}}catch(e){return console.error("Error getting stats:",e),{users:0,actions:0,user_actions:0,system_metrics:0}}}}let c=new r;function l(){let[e,t]=(0,o.useState)({users:0,actions:0,user_actions:0,system_metrics:0}),[i,s]=(0,o.useState)({status:"healthy",uptime:"0d 0h 0m",response_time:0,active_sessions:0,recent_errors:0}),[r,l]=(0,o.useState)(!0),[m,d]=(0,o.useState)(!1),[u,g]=(0,o.useState)([]);(0,o.useEffect)(()=>{h();let e=setInterval(()=>{y()},3e4);return()=>clearInterval(e)},[]);let h=async()=>{l(!0);try{await y(),await p()}catch(e){console.error("Error loading admin data:",e),x("Error loading data: ".concat(e))}finally{l(!1)}},y=async()=>{try{let e=await c.getStats();t(e),x("Stats updated: ".concat(e.users," users, ").concat(e.actions," actions"))}catch(e){console.error("Error refreshing stats:",e),x("Error refreshing stats: ".concat(e))}},p=async()=>{try{let e=await n.L.getRealTimeMetrics();s({status:e.system_health,uptime:f(Date.now()),response_time:e.response_time,active_sessions:e.active_sessions,recent_errors:0})}catch(e){console.error("Error updating system health:",e)}},f=e=>{let t=Date.now()-e,i=Math.floor(t/864e5),a=Math.floor(t%864e5/36e5),o=Math.floor(t%36e5/6e4);return"".concat(i,"d ").concat(a,"h ").concat(o,"m")},x=e=>{let t=new Date().toLocaleTimeString();g(i=>["[".concat(t,"] ").concat(e),...i.slice(0,49)])},b=async()=>{d(!0);try{x("Starting database initialization..."),await c.initializeDatabase(),x("Database initialization complete!"),await y()}catch(e){x("Database initialization failed: ".concat(e))}finally{d(!1)}},v=async()=>{d(!0);try{x("Generating test data..."),await c.generateTestData(),x("Test data generation complete!"),await y()}catch(e){x("Test data generation failed: ".concat(e))}finally{d(!1)}},_=async()=>{if(window.confirm("Are you sure you want to clear all data? This action cannot be undone.")){d(!0);try{x("Clearing database..."),await c.clearDatabase(),x("Database cleared successfully!"),await y()}catch(e){x("Database clear failed: ".concat(e))}finally{d(!1)}}},w=async e=>{d(!0);try{x("Generating ".concat(e," synthetic users...")),await n.L.generateSyntheticUsers(e),x("Successfully generated ".concat(e," users!")),await y()}catch(e){x("User generation failed: ".concat(e))}finally{d(!1)}};return r?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"\uD83C\uDF9B️ Science for Action Admin Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Real-time system monitoring, data management, and AI insights"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:"\uD83D\uDD0D System Health"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-flex px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"healthy":return"text-green-600 bg-green-100";case"warning":return"text-yellow-600 bg-yellow-100";case"critical":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(i.status)),children:i.status.toUpperCase()}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"System Status"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:i.uptime}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Uptime"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[i.response_time,"ms"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Response Time"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:i.active_sessions}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Active Sessions"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:i.recent_errors}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Recent Errors"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:"\uD83D\uDCCA Database Statistics"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:e.users.toLocaleString()}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Users"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-green-600",children:e.actions.toLocaleString()}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Action Items"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:e.user_actions.toLocaleString()}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"User Actions"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:e.system_metrics.toLocaleString()}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"System Metrics"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:"\uD83C\uDFAE Control Panel"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("button",{onClick:b,disabled:m,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-lg font-medium transition-colors duration-200",children:[m?"⏳":"\uD83D\uDE80"," Initialize Database"]}),(0,a.jsxs)("button",{onClick:v,disabled:m,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-lg font-medium transition-colors duration-200",children:[m?"⏳":"\uD83E\uDDEA"," Generate Test Data"]}),(0,a.jsxs)("button",{onClick:()=>w(1e3),disabled:m,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-lg font-medium transition-colors duration-200",children:[m?"⏳":"\uD83D\uDC65"," Add 1K Users"]}),(0,a.jsxs)("button",{onClick:_,disabled:m,className:"bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-lg font-medium transition-colors duration-200",children:[m?"⏳":"\uD83D\uDDD1️"," Clear Database"]})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("button",{onClick:()=>w(5e3),disabled:m,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",children:"Generate 5K Users"}),(0,a.jsx)("button",{onClick:()=>w(1e4),disabled:m,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",children:"Generate 10K Users"}),(0,a.jsx)("button",{onClick:y,disabled:m,className:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",children:"\uD83D\uDD04 Refresh Stats"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:"\uD83D\uDCCB Activity Logs"}),(0,a.jsx)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm max-h-96 overflow-y-auto",children:0===u.length?(0,a.jsx)("p",{className:"text-gray-500",children:"No activity logs yet..."}):u.map((e,t)=>(0,a.jsx)("div",{className:"mb-1",children:e},t))})]}),(0,a.jsx)("div",{className:"fixed bottom-6 right-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-full shadow-lg p-3 flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("healthy"===i.status?"bg-green-500":"warning"===i.status?"bg-yellow-500":"bg-red-500"," animate-pulse")}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"healthy"===i.status?"All systems operational":"warning"===i.status?"System warning":"Critical issues detected"})]})})]})})}},9562:(e,t,i)=>{"use strict";i.d(t,{ProfileProvider:()=>r,x:()=>c});var a=i(5155),o=i(2115);let n=(0,o.createContext)(void 0),s=()=>({id:"demo-user",name:"Demo User",email:"demo@example.com",location:"Demo Location",interests:["environment","climate"],preferred_causes:["environment","climate"],contribution_stats:{actions_completed:0,organizations_supported:0,policies_viewed:0,total_impact_score:0},personalization:{layout_preference:"detailed",color_scheme:"neutral",engagement_level:"medium",communication_frequency:"weekly"},profile_completion:70,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_active:new Date().toISOString(),engagement_metrics:{session_count:1,avg_session_duration:300,page_views:5,actions_per_session:2},intent_actions:[],preferred_topics:["climate","environment"],saved_actions:[],preferences:{auto_save:!0,notifications:!0,theme:"light",digest_frequency:"weekly"}});function r(e){let{children:t}=e,[i,r]=(0,o.useState)(null),[c,l]=(0,o.useState)(!0),[m,d]=(0,o.useState)(!1),u=(0,o.useRef)(!1);(0,o.useEffect)(()=>{u.current||(u.current=!0,setTimeout(async()=>{try{let e=localStorage.getItem("user_profile");if(e)try{let t=JSON.parse(e);r(t),d(!1)}catch(t){console.warn("Invalid stored profile, creating new one");let e=s();r(e),d(!0),localStorage.setItem("user_profile",JSON.stringify(e))}else{let e=s();r(e),d(!0),localStorage.setItem("user_profile",JSON.stringify(e))}}catch(e){console.error("Profile initialization failed:",e),r(s()),d(!0)}finally{l(!1)}},100))},[]);let g=(0,o.useCallback)(e=>{r(t=>{if(!t)return null;let i={...t,...e,updated_at:new Date().toISOString()};return setTimeout(()=>{try{localStorage.setItem("user_profile",JSON.stringify(i))}catch(e){console.warn("Failed to store profile updates:",e)}},0),i})},[]),h=(0,o.useCallback)(e=>{if(!i)return;let t=[...i.interests||[]];t.includes(e)||(t.push(e),g({interests:t}))},[i,g]),y=(0,o.useCallback)(e=>{i&&g({interests:(i.interests||[]).filter(t=>t!==e)})},[i,g]),p=(0,o.useCallback)(()=>{let e=s();r(e),d(!0);try{localStorage.setItem("user_profile",JSON.stringify(e))}catch(e){console.warn("Failed to reset profile in storage:",e)}},[]);return(0,a.jsx)(n.Provider,{value:{profile:i,isLoading:c,isNewUser:m,updateProfile:g,addInterest:h,removeInterest:y,resetProfile:p},children:t})}function c(){let e=(0,o.useContext)(n);if(void 0===e)throw Error("useProfile must be used within a ProfileProvider");return e}}},e=>{e.O(0,[647,674,441,964,358],()=>e(e.s=83)),_N_E=e.O()}]);