(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[314],{2039:(e,t,n)=>{"use strict";n.d(t,{ProfileProvider:()=>o,x:()=>s});var i=n(5155),r=n(2115),a=n(5674);let l=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[n,o]=(0,r.useState)(null),[s,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),[f,g]=(0,r.useState)({}),h=function(e,t){let[n,i]=(0,r.useState)(e);return(0,r.useEffect)(()=>{let t=setTimeout(()=>{i(e)},5e3);return()=>{clearTimeout(t)}},[e,5e3]),n}(f,5e3);(0,r.useEffect)(()=>{(async()=>{c(!0);try{let e=null;if(e=sessionStorage.getItem("current_user_id")){let t=await a.L.getUserById(e);t?(o(y(t)),p(e),u(!1)):await x()}else await x()}catch(e){console.error("Error initializing profile:",e),await x()}finally{c(!1)}})()},[]),(0,r.useEffect)(()=>{Object.keys(h).length>0&&m&&(async()=>{try{console.log("Syncing profile updates:",Object.keys(h));let e=await a.L.updateUser(m,h);e?(o(y(e)),console.log("Profile synced successfully")):console.warn("Profile update returned null, keeping local changes"),g({})}catch(e){console.error("Error syncing profile updates:",{error:e,updates:Object.keys(h),userId:m})}})()},[h,m]);let x=async()=>{try{let e=await a.L.createUser({name:"New User",interests:[],preferred_causes:[],contribution_stats:{actions_completed:0,organizations_supported:0,policies_viewed:0,total_impact_score:0},personalization:{layout_preference:"detailed",color_scheme:"neutral",engagement_level:"medium",communication_frequency:"weekly"},profile_completion:20,engagement_metrics:{session_count:1,avg_session_duration:0,page_views:1,actions_per_session:0}});e&&(o(y(e)),p(e.id),u(!0),sessionStorage.setItem("current_user_id",e.id))}catch(e){console.error("Error creating default profile:",e)}},y=e=>({...e,intent_actions:[],preferred_topics:e.preferred_causes,saved_actions:[],policy_engagement_history:[],preferences:{auto_save:!0,notifications:!0,theme:"light",digest_frequency:"weekly"}}),v=(0,r.useCallback)(async e=>{n&&m&&(o(t=>t?{...t,...e,updated_at:new Date().toISOString()}:null),g(t=>({...t,...e})))},[n,m]),b=(0,r.useCallback)(async()=>{if(m)try{c(!0);let e=await a.L.getUserById(m);e&&o(y(e))}catch(e){console.error("Error refreshing profile:",e)}finally{c(!1)}},[m]),_=(0,r.useCallback)(async e=>{try{c(!0);let t=await a.L.createUser(e);t&&(o(y(t)),p(t.id),u(!0),sessionStorage.setItem("current_user_id",t.id))}catch(e){console.error("Error creating new profile:",e)}finally{c(!1)}},[]),w=(0,r.useCallback)(e=>{!n||n.interests.includes(e)||v({interests:[...n.interests,e]})},[n,v]),j=(0,r.useCallback)(e=>{n&&v({interests:n.interests.filter(t=>t!==e)})},[n,v]),N=(0,r.useCallback)(e=>{!n||n.saved_actions.includes(e)||v({saved_actions:[...n.saved_actions,e]})},[n,v]),C=(0,r.useCallback)(e=>{n&&v({saved_actions:n.saved_actions.filter(t=>t!==e)})},[n,v]),k=(0,r.useCallback)((e,t)=>{if(!n)return;let i={policy_id:e,action:t,timestamp:new Date().toISOString()};v({policy_engagement_history:[...n.policy_engagement_history,i],contribution_stats:{...n.contribution_stats,policies_viewed:n.contribution_stats.policies_viewed+1}})},[n,v]),S=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n&&v({contribution_stats:{...n.contribution_stats,[e]:n.contribution_stats[e]+t}})},[n,v]),E=(0,r.useCallback)(async()=>{try{sessionStorage.removeItem("current_user_id"),await x()}catch(e){console.error("Error resetting profile:",e)}},[]),D=(0,r.useCallback)(()=>n?JSON.stringify(n,null,2):"{}",[n]),L=(0,r.useCallback)(e=>{try{var t,n,i,r,a,l,o,s;let c=JSON.parse(e);if(!c.name)return console.error("Invalid profile data: missing name"),!1;let d={name:c.name,email:c.email,location:c.location,interests:Array.isArray(c.interests)?c.interests:[],preferred_causes:Array.isArray(c.preferred_causes)?c.preferred_causes:[],contribution_stats:{actions_completed:(null==(t=c.contribution_stats)?void 0:t.actions_completed)||0,organizations_supported:(null==(n=c.contribution_stats)?void 0:n.organizations_supported)||0,policies_viewed:(null==(i=c.contribution_stats)?void 0:i.policies_viewed)||0,total_impact_score:(null==(r=c.contribution_stats)?void 0:r.total_impact_score)||0},personalization:{layout_preference:(null==(a=c.personalization)?void 0:a.layout_preference)||"detailed",color_scheme:(null==(l=c.personalization)?void 0:l.color_scheme)||"neutral",engagement_level:(null==(o=c.personalization)?void 0:o.engagement_level)||"medium",communication_frequency:(null==(s=c.personalization)?void 0:s.communication_frequency)||"weekly"}};return v(d),!0}catch(e){return console.error("Error importing profile data:",e),!1}},[v]);return(0,i.jsx)(l.Provider,{value:{profile:n,isLoading:s,isNewUser:d,updateProfile:v,addInterest:w,removeInterest:j,addSavedAction:N,removeSavedAction:C,trackPolicyEngagement:k,updateContributionStats:S,resetProfile:E,exportProfileData:D,importProfileData:L,refreshProfile:b,createNewProfile:_},children:t})}function s(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useProfile must be used within a ProfileProvider");return e}},4879:(e,t,n)=>{"use strict";n.d(t,{N:()=>h});var i=n(2115),r=n(7494);function a(){let e=(0,i.useRef)(!1);return(0,r.E)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var l=n(1421),o=n(845),s=n(2885);class c extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:t}){let n=(0,i.useId)(),r=(0,i.useRef)(null),a=(0,i.useRef)({width:0,height:0,top:0,left:0});return(0,i.useInsertionEffect)(()=>{let{width:e,height:i,top:l,left:o}=a.current;if(t||!r.current||!e||!i)return;r.current.dataset.motionPopId=n;let s=document.createElement("style");return document.head.appendChild(s),s.sheet&&s.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${i}px !important;
            top: ${l}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(s)}},[t]),i.createElement(c,{isPresent:t,childRef:r,sizeRef:a},i.cloneElement(e,{ref:r}))}let u=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:l,mode:c})=>{let u=(0,s.M)(m),p=(0,i.useId)(),f=(0,i.useMemo)(()=>({id:p,initial:t,isPresent:n,custom:a,onExitComplete:e=>{for(let t of(u.set(e,!0),u.values()))if(!t)return;r&&r()},register:e=>(u.set(e,!1),()=>u.delete(e))}),l?void 0:[n]);return(0,i.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[n]),i.useEffect(()=>{n||u.size||!r||r()},[n]),"popLayout"===c&&(e=i.createElement(d,{isPresent:n},e)),i.createElement(o.t.Provider,{value:f},e)};function m(){return new Map}var p=n(869),f=n(7670);let g=e=>e.key||"",h=({children:e,custom:t,initial:n=!0,onExitComplete:o,exitBeforeEnter:s,presenceAffectsLayout:c=!0,mode:d="sync"})=>{var m;(0,f.V)(!s,"Replace exitBeforeEnter with mode='wait'");let h=(0,i.useContext)(p.L).forceRender||function(){let e=a(),[t,n]=(0,i.useState)(0),r=(0,i.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,i.useCallback)(()=>l.Gt.postRender(r),[r]),t]}()[0],x=a(),y=function(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}(e),v=y,b=(0,i.useRef)(new Map).current,_=(0,i.useRef)(v),w=(0,i.useRef)(new Map).current,j=(0,i.useRef)(!0);if((0,r.E)(()=>{j.current=!1,y.forEach(e=>{let t=g(e);w.set(t,e)}),_.current=v}),m=()=>{j.current=!0,w.clear(),b.clear()},(0,i.useEffect)(()=>()=>m(),[]),j.current)return i.createElement(i.Fragment,null,v.map(e=>i.createElement(u,{key:g(e),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:c,mode:d},e)));v=[...v];let N=_.current.map(g),C=y.map(g),k=N.length;for(let e=0;e<k;e++){let t=N[e];-1!==C.indexOf(t)||b.has(t)||b.set(t,void 0)}return"wait"===d&&b.size&&(v=[]),b.forEach((e,n)=>{if(-1!==C.indexOf(n))return;let r=w.get(n);if(!r)return;let a=N.indexOf(n),l=e;l||(l=i.createElement(u,{key:g(r),isPresent:!1,onExitComplete:()=>{b.delete(n);let e=Array.from(w.keys()).filter(e=>!C.includes(e));if(e.forEach(e=>w.delete(e)),_.current=y.filter(t=>{let i=g(t);return i===n||e.includes(i)}),!b.size){if(!1===x.current)return;h(),o&&o()}},custom:t,presenceAffectsLayout:c,mode:d},r),b.set(n,l)),v.splice(a,0,l)}),v=v.map(e=>{let t=e.key;return b.has(t)?e:i.createElement(u,{key:g(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)}),i.createElement(i.Fragment,null,b.size?v:v.map(e=>(0,i.cloneElement)(e)))}},4948:(e,t,n)=>{Promise.resolve().then(n.bind(n,7290))},7290:(e,t,n)=>{"use strict";n.d(t,{default:()=>g});var i=n(5155),r=n(2115),a=n(4879),l=n(1793),o=n(2039),s=n(9849);let c=[{id:"1",title:"Clean Industrial Heat Tax Credit",description:"Smart policies that drive investments into industrial innovation to clean up the industrial sector. Providing a clean heat production tax credit to incentivize manufacturers to switch to clean energy sources.",tags:["climate","industrial","policy","tax-credit"],category:"policy",impact:4,relevance:4,organization:"Climate Science Alliance",link:"https://example.org/clean-heat",location:"US",trending:!0,featured:!0,difficulty:"medium",impact_level:"high",completion_count:234,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",title:"NY Climate Change Superfund Act",description:"New York's Climate Change Superfund Act establishes a cost recovery program requiring companies that have emitted significant greenhouse gases to bear costs of infrastructure adaptation.",tags:["ny","state-gov","policy","climate","superfund"],category:"policy",impact:5,relevance:5,organization:"NY Climate Action",link:"https://example.org/ny-climate",location:"New York",trending:!0,featured:!0,difficulty:"hard",impact_level:"high",completion_count:156,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"3",title:"Community Solar Gardens Initiative",description:"Local community organizing to establish shared solar energy systems that allow residents to access clean energy even if they can't install panels on their own property.",tags:["solar","community","renewable-energy","local"],category:"action",impact:3,relevance:4,organization:"Local Solar Coalition",link:"https://example.org/community-solar",location:"Local",trending:!1,featured:!1,difficulty:"easy",impact_level:"medium",completion_count:89,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"4",title:"Green Jobs Training Program",description:"Workforce development program that provides training and certification in renewable energy installation, energy efficiency, and sustainable agriculture.",tags:["jobs","training","green-economy","workforce"],category:"organization",impact:4,relevance:3,organization:"Green Jobs Alliance",link:"https://example.org/green-jobs",location:"National",trending:!0,featured:!1,difficulty:"medium",impact_level:"medium",completion_count:123,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],d=[{id:"all",label:"All Categories",description:"Show all types of actions",icon:"\uD83D\uDCC1",count:c.length},{id:"policy",label:"Policy",description:"Government policies and legislation",icon:"\uD83C\uDFDB️",count:c.filter(e=>"policy"===e.category).length},{id:"action",label:"Actions",description:"Direct community actions",icon:"⚡",count:c.filter(e=>"action"===e.category).length},{id:"organization",label:"Organizations",description:"Groups and nonprofits to join",icon:"\uD83C\uDFE2",count:c.filter(e=>"organization"===e.category).length},{id:"event",label:"Events",description:"Upcoming events and meetings",icon:"\uD83D\uDCC5",count:c.filter(e=>"event"===e.category).length}],u=[{id:"all",label:"All Locations",description:"Actions from everywhere",icon:"\uD83C\uDF0D",count:c.length},{id:"local",label:"Local",description:"Community-level actions",icon:"\uD83C\uDFD8️",count:c.filter(e=>"Local"===e.location).length},{id:"state",label:"State Level",description:"State government actions",icon:"\uD83D\uDDFA️",count:c.filter(e=>{var t;return null==(t=e.location)?void 0:t.includes("New York")}).length},{id:"national",label:"National",description:"Federal level actions",icon:"\uD83C\uDDFA\uD83C\uDDF8",count:c.filter(e=>"National"===e.location||"US"===e.location).length},{id:"global",label:"Global",description:"International actions",icon:"\uD83C\uDF0D",count:c.filter(e=>"Global"===e.location).length}],m=[{id:"all",label:"All Levels",description:"Any difficulty level",icon:"\uD83D\uDCCA",count:c.length},{id:"easy",label:"Easy",description:"Quick and simple actions",icon:"\uD83D\uDFE2",count:c.filter(e=>"easy"===e.difficulty).length},{id:"medium",label:"Medium",description:"Moderate time commitment",icon:"\uD83D\uDFE1",count:c.filter(e=>"medium"===e.difficulty).length},{id:"hard",label:"Hard",description:"Significant involvement required",icon:"\uD83D\uDD34",count:c.filter(e=>"hard"===e.difficulty).length}],p=[{id:"all",label:"All Impact Levels",description:"Any impact level",icon:"\uD83D\uDCA5",count:c.length},{id:"high",label:"High Impact",description:"Major potential for change",icon:"\uD83D\uDE80",count:c.filter(e=>"high"===e.impact_level).length},{id:"medium",label:"Medium Impact",description:"Moderate potential for change",icon:"⭐",count:c.filter(e=>"medium"===e.impact_level).length},{id:"low",label:"Low Impact",description:"Building awareness and support",icon:"\uD83D\uDCA1",count:c.filter(e=>"low"===e.impact_level).length}],f=[{id:"trending",label:"Trending",description:"Most popular actions",icon:"\uD83D\uDCC8"},{id:"impact",label:"Impact",description:"Highest potential impact",icon:"\uD83D\uDCA5"},{id:"recent",label:"Recent",description:"Most recently added",icon:"\uD83D\uDD52"},{id:"completion",label:"Participation",description:"Most completed actions",icon:"\uD83D\uDC65"}];function g(){let{profile:e}=(0,o.x)(),[t,n]=(0,r.useState)(""),[g,h]=(0,r.useState)("all"),[x,y]=(0,r.useState)("all"),[v,b]=(0,r.useState)("all"),[_,w]=(0,r.useState)("all"),[j,N]=(0,r.useState)("trending"),[C,k]=(0,r.useState)(c),S=t||"all"!==g||"all"!==x||"all"!==v||"all"!==_||"trending"!==j,E=()=>{n(""),h("all"),y("all"),b("all"),w("all"),N("trending")};return(0,r.useEffect)(()=>{let e=c;if("all"!==g&&(e=e.filter(e=>e.category===g)),"all"!==x&&(e=e.filter(e=>{var t;return"local"===x?"Local"===e.location:"state"===x?null==(t=e.location)?void 0:t.includes("New York"):"national"===x?"National"===e.location||"US"===e.location:"global"!==x||"Global"===e.location})),"all"!==v&&(e=e.filter(e=>e.difficulty===v)),"all"!==_&&(e=e.filter(e=>e.impact_level===_)),t.trim()){let n=t.toLowerCase();e=e.filter(e=>{var t,i;return e.title.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.tags.some(e=>e.toLowerCase().includes(n))||(null==(t=e.organization)?void 0:t.toLowerCase().includes(n))||(null==(i=e.location)?void 0:i.toLowerCase().includes(n))})}k(e=[...e].sort((e,t)=>{switch(j){case"trending":return!!t.trending-!!e.trending||t.completion_count-e.completion_count;case"impact":return t.impact-e.impact;case"recent":return new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime();case"completion":return t.completion_count-e.completion_count;default:return 0}}))},[t,g,x,v,_,j]),(0,i.jsxs)("div",{className:"w-full max-w-7xl mx-auto p-6",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold text-text mb-4",children:"Explore Actions"}),(0,i.jsx)("p",{className:"text-lg text-grayText",children:"Discover ways to make a difference in your community and beyond"})]}),(0,i.jsxs)("div",{className:"bg-card rounded-card border border-grayBorder p-6 mb-6",children:[(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value),placeholder:"Search actions, topics, organizations...",className:"w-full p-4 bg-white border border-grayBorder rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text"})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,i.jsx)(s.A,{options:d,value:g,onChange:h,placeholder:"All Categories"}),(0,i.jsx)(s.A,{options:u,value:x,onChange:y,placeholder:"All Locations"}),(0,i.jsx)(s.A,{options:m,value:v,onChange:b,placeholder:"All Levels"}),(0,i.jsx)(s.A,{options:p,value:_,onChange:w,placeholder:"All Impact"}),(0,i.jsx)(s.A,{options:f,value:j,onChange:N,placeholder:"Sort By"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("span",{className:"text-sm text-grayText",children:[C.length," of ",c.length," actions"]}),S&&(0,i.jsx)("button",{onClick:E,className:"text-sm text-primary hover:text-primaryDark transition-colors",children:"Clear filters"})]})]}),(0,i.jsx)("div",{className:"space-y-4",children:C.length>0?(0,i.jsx)(a.N,{mode:"popLayout",children:C.map(e=>(0,i.jsx)(l.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,i.jsxs)("div",{className:"bg-card border border-grayBorder rounded-card p-6 hover:border-primary transition-all hover:shadow-lg",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-text",children:e.title}),e.trending&&(0,i.jsx)("span",{className:"bg-primary/10 text-primary px-2 py-1 rounded-full text-xs font-medium",children:"\uD83D\uDD25 Trending"}),e.featured&&(0,i.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium",children:"⭐ Featured"})]}),(0,i.jsx)("p",{className:"text-grayText mb-3",children:e.description}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:e.tags.map(e=>(0,i.jsx)("span",{className:"bg-graySoft text-grayText px-2 py-1 rounded text-xs",children:e},e))}),(0,i.jsxs)("div",{className:"flex items-center gap-4 text-sm text-grayText",children:[(0,i.jsxs)("span",{children:["\uD83D\uDCCD ",e.location]}),(0,i.jsxs)("span",{children:["\uD83C\uDFE2 ",e.organization]}),(0,i.jsxs)("span",{children:["\uD83D\uDC65 ",e.completion_count," completed"]}),(0,i.jsxs)("span",{className:"capitalize",children:["\uD83D\uDCC2 ",e.category]})]})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-2 ml-4",children:[(0,i.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.difficulty)),children:e.difficulty}),(0,i.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"high":return"bg-purple-100 text-purple-800";case"medium":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(e.impact_level)),children:[e.impact_level," impact"]})]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("span",{className:"text-yellow-500",children:"⭐"}),(0,i.jsxs)("span",{className:"text-sm text-grayText",children:[e.impact,"/5 impact"]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("span",{className:"text-blue-500",children:"\uD83D\uDCCA"}),(0,i.jsxs)("span",{className:"text-sm text-grayText",children:[e.relevance,"/5 relevance"]})]})]}),(0,i.jsx)("button",{className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primaryDark transition-colors",onClick:()=>{e.link&&window.open(e.link,"_blank")},children:"Take Action"})]})]})},e.id))}):(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No results found"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search terms or filters to find what you're looking for."}),S&&(0,i.jsx)("button",{onClick:E,className:"mt-4 text-primary hover:text-primaryDark transition-colors",children:"Clear all filters"})]})})]})}},9849:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(5155),r=n(2115),a=n(4879),l=n(1793);function o(e){let{options:t,value:n,onChange:o,placeholder:s="Select option",label:c,searchable:d=!0,disabled:u=!1,className:m=""}=e,[p,f]=(0,r.useState)(!1),[g,h]=(0,r.useState)(""),x=(0,r.useRef)(null),y=(0,r.useRef)(null),v=r.useMemo(()=>g.trim()?t.filter(e=>{var t;return e.label.toLowerCase().includes(g.toLowerCase())||(null==(t=e.description)?void 0:t.toLowerCase().includes(g.toLowerCase()))}):t,[t,g]),b=t.find(e=>e.id===n);return(0,r.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&(f(!1),h(""))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,r.useEffect)(()=>{p&&d&&y.current&&y.current.focus()},[p,d]),(0,i.jsxs)("div",{ref:x,className:"relative ".concat(m),children:[c&&(0,i.jsx)("label",{className:"block text-sm font-medium text-text mb-2",children:c}),(0,i.jsxs)("button",{type:"button",onClick:()=>{u||f(!p)},disabled:u,className:"\n          w-full p-3 bg-white border border-grayBorder rounded-lg \n          focus:outline-none focus:ring-2 focus:ring-primary \n          text-left flex items-center justify-between\n          ".concat(u?"bg-gray-50 cursor-not-allowed":"hover:border-primary cursor-pointer","\n          ").concat(p?"border-primary ring-2 ring-primary":"","\n        "),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(null==b?void 0:b.icon)&&(0,i.jsx)("span",{className:"text-lg",children:b.icon}),(0,i.jsx)("div",{className:"flex-1 min-w-0",children:b?(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"font-medium text-text truncate",children:[b.label,void 0!==b.count&&(0,i.jsxs)("span",{className:"ml-2 text-sm text-grayText",children:["(",b.count,")"]})]}),b.description&&(0,i.jsx)("div",{className:"text-sm text-grayText truncate",children:b.description})]}):(0,i.jsx)("span",{className:"text-grayText",children:s})})]}),(0,i.jsx)("svg",{className:"w-5 h-5 text-grayText transition-transform ".concat(p?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,i.jsx)(a.N,{children:p&&(0,i.jsx)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(0,i.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-grayBorder rounded-lg shadow-lg max-h-64 overflow-hidden",children:[d&&(0,i.jsx)("div",{className:"p-3 border-b border-grayBorder",children:(0,i.jsx)("input",{ref:y,type:"text",value:g,onChange:e=>h(e.target.value),placeholder:"Search options...",className:"w-full p-2 text-sm border border-grayBorder rounded focus:outline-none focus:ring-1 focus:ring-primary"})}),(0,i.jsx)("div",{className:"max-h-48 overflow-y-auto",children:v.length>0?v.map(e=>(0,i.jsxs)("button",{type:"button",onClick:()=>{o(e.id),f(!1),h("")},className:"\n                      w-full p-3 text-left hover:bg-gray-50 flex items-center gap-3\n                      ".concat(n===e.id?"bg-primary/5 border-r-2 border-primary":"","\n                      transition-colors\n                    "),children:[e.icon&&(0,i.jsx)("span",{className:"text-lg flex-shrink-0",children:e.icon}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"font-medium text-text truncate",children:e.label}),void 0!==e.count&&(0,i.jsx)("span",{className:"text-sm text-grayText ml-2",children:e.count})]}),e.description&&(0,i.jsx)("div",{className:"text-sm text-grayText truncate",children:e.description})]}),n===e.id&&(0,i.jsx)("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.id)):(0,i.jsx)("div",{className:"p-3 text-center text-grayText",children:"No options found"})})]})})})]})}}},e=>{e.O(0,[793,647,674,441,964,358],()=>e(e.s=4948)),_N_E=e.O()}]);