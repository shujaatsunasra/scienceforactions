(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[798],{2679:(e,t,a)=>{"use strict";a.d(t,{default:()=>T});var i=a(5155),s=a(2115),n=a(5695),r=a(7083),l=a(1793),o=a(4879);let c=l.P.div,d=l.P.button,x=e=>{let t,{action:a,index:n,displayMode:r,onSelect:l,onSave:o,onRate:x}=e,[m,u]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!!a.savedAt),[g,y]=(0,s.useState)(!1),[f,b]=(0,s.useState)(0),v=(0,s.useRef)(null);return(0,s.useEffect)(()=>{h(!!a.savedAt)},[a.savedAt]),(0,i.jsxs)(c,{ref:v,variants:{hidden:{opacity:0,y:"stack"===r?20:32,scale:"grid"===r?.95:1},visible:{opacity:1,y:0,scale:1,transition:{delay:.1*n,duration:.4,ease:[.4,0,.2,1]}},hover:{y:-4,scale:"grid"===r?1.02:1.01,transition:{duration:.2}}},initial:"hidden",animate:"visible",whileHover:"hover",className:"\n        relative group cursor-pointer\n        ".concat("grid"===r?"bg-card rounded-card shadow-card border border-grayBorder p-6":"bg-card rounded-card shadow-card border border-grayBorder p-6 mb-4","\n        transition-all duration-200\n        hover:shadow-lg hover:border-primary/20\n      "),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onClick:l,children:[(0,i.jsxs)("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[(0,i.jsx)("div",{className:"w-2 h-2 rounded-full ".concat((e=>e>=4?"bg-red-500":e>=3?"bg-orange-500":e>=2?"bg-yellow-500":"bg-green-500")(a.urgency)),title:"Urgency: ".concat(a.urgency,"/5")}),a.engagementScore&&(0,i.jsxs)("div",{className:"text-xs text-grayText font-medium bg-graySoft px-2 py-1 rounded-pill",children:[Math.round(a.engagementScore),"% match"]})]}),(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)("span",{className:"inline-block px-3 py-1 bg-primary/10 text-primary text-xs font-semibold rounded-pill",children:a.ctaType.replace("_"," ").toUpperCase()})}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-text mb-2 line-clamp-2",children:a.title}),(0,i.jsx)("p",{className:"text-grayText text-sm line-clamp-3 leading-relaxed",children:a.description})]}),(0,i.jsxs)("div",{className:"mb-4 space-y-2",children:[a.timeCommitment&&(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-grayText",children:[(0,i.jsx)("span",{children:"⏱️"}),(0,i.jsx)("span",{children:a.timeCommitment})]}),a.organizationName&&(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-grayText",children:[(0,i.jsx)("span",{children:"\uD83C\uDFE2"}),(0,i.jsx)("span",{children:a.organizationName})]}),(0,i.jsx)("div",{className:"flex items-center gap-4",children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("span",{className:"text-xs text-grayText",children:"Impact:"}),(t=a.impact,[,,,,,].fill(0).map((e,a)=>(0,i.jsx)("span",{className:"text-sm ".concat(a<t?"text-primary":"text-grayBorder"),children:"★"},a)))]})})]}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.tags.slice(0,3).map(e=>(0,i.jsx)("span",{className:"inline-block px-2 py-1 bg-graySoft text-grayText text-xs rounded-pill",children:e},e)),a.tags.length>3&&(0,i.jsxs)("span",{className:"inline-block px-2 py-1 bg-graySoft text-grayText text-xs rounded-pill",children:["+",a.tags.length-3," more"]})]})}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(d,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-primary text-white text-sm font-semibold rounded-pill hover:bg-primaryDark transition-all",onClick:e=>{e.stopPropagation(),l()},children:a.cta}),(0,i.jsx)(d,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-full transition-all ".concat(p?"text-primary bg-primary/10":"text-grayText hover:text-primary hover:bg-primary/10"),onClick:e=>{e.stopPropagation(),o(),h(!0)},title:p?"Saved":"Save action",children:p?"❤️":"\uD83E\uDD0D"})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(d,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 text-grayText hover:text-primary transition-all rounded-full hover:bg-primary/10",onClick:e=>{e.stopPropagation(),y(!g)},title:"Rate this action",children:"⭐"}),g&&(0,i.jsxs)(c,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},className:"absolute right-0 bottom-full mb-2 bg-white rounded-lg shadow-lg border border-grayBorder p-3 min-w-[120px] z-10",children:[(0,i.jsx)("p",{className:"text-xs text-grayText mb-2",children:"Rate this action:"}),(0,i.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,i.jsx)(d,{whileHover:{scale:1.2},whileTap:{scale:.9},className:"text-lg ".concat(e<=f?"text-primary":"text-grayBorder"," hover:text-primary transition-colors"),onClick:()=>(e=>{b(e),x(e),y(!1)})(e),children:"⭐"},e))})]})]})]}),(0,i.jsx)(c,{className:"absolute inset-0 bg-primary/5 rounded-card pointer-events-none",initial:{opacity:0},animate:{opacity:+!!m},transition:{duration:.2}}),a.completedAt&&(0,i.jsx)("div",{className:"absolute top-4 left-4",children:(0,i.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-white text-xs",children:"✓"})})})]})},m=l.P.div,u=e=>{let{isOpen:t,onClose:a,action:n,onComplete:r,onSave:l}=e,[c,d]=(0,s.useState)("overview"),[x,u]=(0,s.useState)(!1),[p,h]=(0,s.useState)({});if((0,s.useEffect)(()=>{n&&(d("overview"),h({}),u(!1))},[n]),!n)return null;let g=async()=>{u(!0);try{await new Promise(e=>setTimeout(e,1e3)),r(n.id,p)}finally{u(!1)}};return(0,i.jsx)(o.N,{children:t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m,{variants:{hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},initial:"hidden",animate:"visible",exit:"exit",className:"fixed inset-0 bg-black/50 z-40",onClick:a}),(0,i.jsxs)(m,{variants:{hidden:{x:"100%",opacity:0},visible:{x:0,opacity:1,transition:{type:"spring",stiffness:300,damping:30}},exit:{x:"100%",opacity:0,transition:{duration:.3}}},initial:"hidden",animate:"visible",exit:"exit",className:"fixed right-0 top-0 h-full w-full md:w-2/3 lg:w-1/2 xl:w-2/5 bg-white z-50 shadow-2xl overflow-hidden flex flex-col",children:[(0,i.jsxs)("div",{className:"bg-white border-b border-grayBorder p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-text",children:n.title}),(0,i.jsx)("button",{onClick:a,className:"p-2 hover:bg-graySoft rounded-full transition-colors",children:"✕"})]}),(0,i.jsx)("div",{className:"flex gap-1 bg-graySoft rounded-lg p-1",children:["overview","template","resources"].map(e=>(0,i.jsx)("button",{className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(c===e?"bg-white text-text shadow-sm":"text-grayText hover:text-text"),onClick:()=>d(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,i.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(()=>{switch(c){case"overview":return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-text mb-3",children:"Action Overview"}),(0,i.jsx)("p",{className:"text-grayText leading-relaxed",children:n.description})]}),n.nextSteps&&n.nextSteps.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-md font-semibold text-text mb-3",children:"Next Steps"}),(0,i.jsx)("ul",{className:"space-y-2",children:n.nextSteps.map((e,t)=>(0,i.jsxs)("li",{className:"flex items-start gap-3",children:[(0,i.jsx)("span",{className:"bg-primary text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold mt-0.5",children:t+1}),(0,i.jsx)("span",{className:"text-grayText",children:e})]},t))})]}),n.organizationName&&(0,i.jsxs)("div",{className:"bg-graySoft rounded-lg p-4",children:[(0,i.jsx)("h4",{className:"text-md font-semibold text-text mb-2",children:"Organization"}),(0,i.jsx)("p",{className:"text-grayText",children:n.organizationName})]})]});case"template":var e,t;return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-text mb-3",children:(null==(e=n.template)?void 0:e.type)==="letter"?"Letter Template":"Form Template"}),n.template&&(0,i.jsx)("div",{className:"bg-graySoft rounded-lg p-4",children:(0,i.jsx)("textarea",{className:"w-full h-64 p-4 border border-grayBorder rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary",value:p.templateContent||n.template.content,onChange:e=>h(t=>({...t,templateContent:e.target.value})),placeholder:"Customize your message..."})})]}),(null==(t=n.template)?void 0:t.type)==="letter"&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-md font-semibold text-text mb-3",children:"Your Information"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("input",{type:"text",placeholder:"Your Full Name",className:"w-full p-3 border border-grayBorder rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",value:p.name||"",onChange:e=>h(t=>({...t,name:e.target.value}))}),(0,i.jsx)("input",{type:"email",placeholder:"Your Email",className:"w-full p-3 border border-grayBorder rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",value:p.email||"",onChange:e=>h(t=>({...t,email:e.target.value}))}),(0,i.jsx)("input",{type:"text",placeholder:"Your Address",className:"w-full p-3 border border-grayBorder rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",value:p.address||"",onChange:e=>h(t=>({...t,address:e.target.value}))})]})]})]});case"resources":return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("div",{children:(0,i.jsx)("h3",{className:"text-lg font-semibold text-text mb-3",children:"Resources & Links"})}),n.resourceLinks&&n.resourceLinks.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-md font-semibold text-text mb-3",children:"Helpful Resources"}),(0,i.jsx)("div",{className:"space-y-3",children:n.resourceLinks.map((e,t)=>(0,i.jsx)("div",{className:"bg-graySoft rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("span",{className:"text-2xl",children:"emergency"===e.type?"\uD83D\uDEA8":"support"===e.type?"\uD83E\uDD1D":"application"===e.type?"\uD83D\uDCDD":"\uD83D\uDCD6"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h5",{className:"font-semibold text-text",children:e.title}),(0,i.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline text-sm",children:"Visit Resource →"})]})]})},t))})]}),n.socialShareData&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-md font-semibold text-text mb-3",children:"Share This Action"}),(0,i.jsxs)("div",{className:"bg-graySoft rounded-lg p-4",children:[(0,i.jsx)("p",{className:"text-grayText mb-3",children:n.socialShareData.message}),(0,i.jsx)("div",{className:"flex gap-2 mb-3",children:n.socialShareData.hashtags.map(e=>(0,i.jsx)("span",{className:"text-primary text-sm",children:e},e))}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors",children:"Share on Twitter"}),(0,i.jsx)("button",{className:"px-4 py-2 bg-blue-700 text-white rounded-lg text-sm hover:bg-blue-800 transition-colors",children:"Share on Facebook"})]})]})]})]});default:return null}})()}),(0,i.jsx)("div",{className:"bg-white border-t border-grayBorder p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,i.jsx)("div",{className:"flex gap-2",children:(0,i.jsx)("button",{onClick:l,className:"px-4 py-2 border border-grayBorder text-grayText rounded-lg hover:bg-graySoft transition-colors",children:"Save for Later"})}),(0,i.jsx)("button",{onClick:g,disabled:x,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primaryDark transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:x?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):"Complete Action"})]})})]})]})})},p=l.P.div,h=e=>{let{size:t="medium",color:a="text-primary"}=e;return(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)(p,{className:"".concat({small:"w-4 h-4",medium:"w-6 h-6",large:"w-8 h-8"}[t]," ").concat(a," relative"),animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:(0,i.jsx)("div",{className:"absolute inset-0 border-2 border-current border-t-transparent rounded-full"})})})},g=l.P.div,y=e=>{let{message:t,type:a,onClose:n,duration:r=3e3}=e;(0,s.useEffect)(()=>{let e=setTimeout(()=>{n()},r);return()=>clearTimeout(e)},[r,n]);let l="\n    ".concat((()=>{switch(a){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"info":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}})(),"\n    px-6 py-4 rounded-lg shadow-lg\n    flex items-center gap-3\n    max-w-sm min-w-[300px]\n  ");return(0,i.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,i.jsxs)(g,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3},className:l,children:[(0,i.jsx)("span",{className:"text-lg",children:(()=>{switch(a){case"success":return"✅";case"error":return"❌";case"info":return"ℹ️";default:return""}})()}),(0,i.jsx)("span",{className:"flex-1 text-sm font-medium",children:t}),(0,i.jsx)("button",{onClick:n,className:"text-white/80 hover:text-white transition-colors ml-2",children:"✕"})]})})};var f=a(5063);let b=l.P.div,v=l.P.button,j=e=>{let{intentData:t,onBack:a,onReset:l}=e,c=(0,n.useRouter)(),{generatedActions:d,isGenerating:m,generateAdaptiveActions:p,completeAction:g,saveAction:j,trackEngagement:N,updateUserPreferences:w}=(0,r.f)(),[S,k]=(0,s.useState)(null),[C,T]=(0,s.useState)(!1),[R,E]=(0,s.useState)(null),[A,P]=(0,s.useState)("stack"),[B,D]=(0,s.useState)([]);(0,s.useEffect)(()=>{t&&p(t)},[t,p]),(0,s.useCallback)(async()=>{a?a():await f.Ew.navigateTo(c,"/tool")},[a,c]),(0,s.useCallback)(async()=>{l?l():await f.Ew.navigateTo(c,"/main")},[l,c]);let L=(0,s.useCallback)(e=>{k(e),T(!0),N(e.id,0,"view")},[N]),_=(0,s.useCallback)((e,t)=>{g(e,t),E({message:"Action completed! Your engagement has been recorded.",type:"success"}),setTimeout(()=>{T(!1),k(null)},1500)},[g]),z=(0,s.useCallback)(e=>{j(e),E({message:"Action saved to your profile!",type:"success"})},[j]),H=(0,s.useCallback)((e,t,a)=>{w(e,t,a),E({message:"Thank you for your feedback! This helps us improve recommendations.",type:"info"})},[w]),M=s.useMemo(()=>0===B.length?d:d.filter(e=>B.every(t=>e.tags.includes(t))),[d,B]),I=s.useMemo(()=>{let e=new Set;return d.forEach(t=>{t.tags.forEach(t=>e.add(t))}),Array.from(e)},[d]),W={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0}};return(0,i.jsxs)("div",{className:"w-full max-w-6xl mx-auto",children:[(0,i.jsxs)(b,{variants:W,initial:"hidden",animate:"visible",className:"flex justify-between items-center mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)(v,{whileHover:{x:-3},transition:{type:"spring",stiffness:400},className:"text-grayText text-base font-medium hover:underline px-2 py-2 rounded-pill transition-all",onClick:a,children:"← Back"}),(0,i.jsxs)("div",{className:"text-lg text-text",children:["Results for ",(0,i.jsx)("span",{className:"font-bold text-primary",children:t.intent})," about"," ",(0,i.jsx)("span",{className:"font-bold text-primary",children:t.topic})," in"," ",(0,i.jsx)("span",{className:"font-bold text-primary",children:t.location})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"flex bg-graySoft rounded-pill p-1",children:[(0,i.jsx)(v,{whileTap:{scale:.95},className:"px-3 py-1 rounded-pill text-sm transition-all ".concat("stack"===A?"bg-primary text-white":"text-grayText hover:text-text"),onClick:()=>P("stack"),children:"Stack"}),(0,i.jsx)(v,{whileTap:{scale:.95},className:"px-3 py-1 rounded-pill text-sm transition-all ".concat("grid"===A?"bg-primary text-white":"text-grayText hover:text-text"),onClick:()=>P("grid"),children:"Grid"})]}),(0,i.jsx)(v,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:400},className:"text-grayText text-base font-medium hover:underline px-2 py-2 rounded-pill transition-all",onClick:l,children:"Reset"})]})]}),I.length>0&&(0,i.jsx)(b,{variants:W,initial:"hidden",animate:"visible",className:"mb-6",children:(0,i.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,i.jsx)("span",{className:"text-sm text-grayText self-center mr-2",children:"Filter by:"}),I.map(e=>(0,i.jsx)(v,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1 rounded-pill text-sm border transition-all ".concat(B.includes(e)?"bg-primary text-white border-primary":"bg-graySoft text-grayText border-grayBorder hover:border-primary"),onClick:()=>{D(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},children:e},e)),B.length>0&&(0,i.jsx)(v,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1 rounded-pill text-sm text-grayText hover:text-text",onClick:()=>D([]),children:"Clear all"})]})}),m&&(0,i.jsxs)(b,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-16",children:[(0,i.jsx)(h,{size:"large"}),(0,i.jsxs)(b,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-4 text-grayText text-center",children:[(0,i.jsx)("p",{className:"text-lg mb-2",children:"Generating personalized actions..."}),(0,i.jsx)("p",{className:"text-sm",children:"Analyzing your intent, topic preferences, and location"})]})]}),!m&&M.length>0&&(0,i.jsx)(b,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},initial:"hidden",animate:"visible",className:"".concat("grid"===A?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"flex flex-col gap-4"),children:(0,i.jsx)(o.N,{children:M.map((e,t)=>(0,i.jsx)(x,{action:e,index:t,displayMode:A,onSelect:()=>L(e),onSave:()=>z(e.id),onRate:(t,a)=>H(e.id,t,a)},e.id))})}),!m&&0===M.length&&d.length>0&&(0,i.jsxs)(b,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[(0,i.jsx)("p",{className:"text-grayText text-lg mb-4",children:"No actions match your current filters."}),(0,i.jsx)(v,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 py-2 bg-primary text-white rounded-pill hover:bg-primaryDark transition-all",onClick:()=>D([]),children:"Clear filters"})]}),!m&&0===d.length&&(0,i.jsx)(b,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:(0,i.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,i.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-text mb-2",children:"No actions found"}),(0,i.jsxs)("p",{className:"text-grayText mb-6",children:["We couldn't generate specific actions for \"",t.topic,'" in "',t.location,"\". Let's try some alternatives."]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)(v,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full px-6 py-3 bg-primary text-white rounded-xl hover:bg-primaryDark transition-all",onClick:()=>{p({...t,location:"Local"})},children:'Try with "Local" instead'}),(0,i.jsx)(v,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full px-6 py-3 bg-graySoft text-text rounded-xl hover:bg-grayBorder transition-all",onClick:a,children:"Choose a different topic"})]})]})}),(0,i.jsx)(u,{isOpen:C,onClose:()=>{T(!1),k(null)},action:S,onComplete:_,onSave:()=>S&&z(S.id),onRate:(e,t)=>S&&H(S.id,e,t)}),(0,i.jsx)(o.N,{children:R&&(0,i.jsx)(y,{message:R.message,type:R.type,onClose:()=>E(null)})})]})};var N=a(2039),w=a(9849);let S=[{id:"be_heard",label:"Be Heard",description:"Make your voice count on policies and issues",icon:"\uD83D\uDCE2",count:245},{id:"volunteer",label:"Volunteer",description:"Get involved with organizations doing the work",icon:"\uD83E\uDD1D",count:189},{id:"get_help",label:"Get Help",description:"Find resources and support for your needs",icon:"\uD83D\uDCA1",count:156},{id:"organize",label:"Organize",description:"Start or join movements for change",icon:"\uD83D\uDC65",count:98},{id:"donate",label:"Donate",description:"Support causes with financial contributions",icon:"\uD83D\uDC9D",count:167}],k=[{id:"climate_change",label:"Climate Change",description:"Environmental protection and sustainability",icon:"\uD83C\uDF0D",count:234},{id:"healthcare",label:"Healthcare",description:"Medical access and health policy",icon:"\uD83C\uDFE5",count:198},{id:"education",label:"Education",description:"Schools, funding, and educational equity",icon:"\uD83C\uDF93",count:176},{id:"social_justice",label:"Social Justice",description:"Equality, civil rights, and fairness",icon:"⚖️",count:203},{id:"economy",label:"Economy",description:"Jobs, wages, and economic policy",icon:"\uD83D\uDCBC",count:145},{id:"housing",label:"Housing",description:"Affordable housing and tenant rights",icon:"\uD83C\uDFE0",count:128},{id:"transportation",label:"Transportation",description:"Public transit and infrastructure",icon:"\uD83D\uDE8C",count:89},{id:"immigration",label:"Immigration",description:"Immigration policy and refugee support",icon:"\uD83C\uDF0F",count:112},{id:"criminal_justice",label:"Criminal Justice",description:"Police reform and prison system",icon:"\uD83D\uDD12",count:134},{id:"voting_rights",label:"Voting Rights",description:"Election access and democracy",icon:"\uD83D\uDDF3️",count:156},{id:"womens_rights",label:"Women's Rights",description:"Gender equality and reproductive rights",icon:"\uD83D\uDC69",count:178},{id:"lgbtq_rights",label:"LGBTQ+ Rights",description:"LGBTQ+ equality and protection",icon:"\uD83C\uDFF3️‍\uD83C\uDF08",count:145},{id:"disability_rights",label:"Disability Rights",description:"Accessibility and disability advocacy",icon:"♿",count:67},{id:"mental_health",label:"Mental Health",description:"Mental health support and awareness",icon:"\uD83E\uDDE0",count:123},{id:"technology",label:"Technology",description:"Digital rights and tech policy",icon:"\uD83D\uDCBB",count:98}],C=[{id:"online",label:"Online/Virtual",description:"Actions you can take from anywhere",icon:"\uD83D\uDCBB",count:456},{id:"local",label:"Local Community",description:"Actions in your local area",icon:"\uD83C\uDFD8️",count:234},{id:"california",label:"California",description:"State-specific actions",icon:"\uD83C\uDF34",count:189},{id:"new_york",label:"New York",description:"State-specific actions",icon:"\uD83D\uDDFD",count:156},{id:"texas",label:"Texas",description:"State-specific actions",icon:"\uD83E\uDD20",count:134},{id:"florida",label:"Florida",description:"State-specific actions",icon:"\uD83C\uDF34",count:112},{id:"washington",label:"Washington",description:"State-specific actions",icon:"\uD83C\uDFD4️",count:98},{id:"illinois",label:"Illinois",description:"State-specific actions",icon:"\uD83C\uDF06",count:87},{id:"pennsylvania",label:"Pennsylvania",description:"State-specific actions",icon:"\uD83D\uDD14",count:76},{id:"ohio",label:"Ohio",description:"State-specific actions",icon:"\uD83C\uDF3D",count:65},{id:"georgia",label:"Georgia",description:"State-specific actions",icon:"\uD83C\uDF51",count:54},{id:"north_carolina",label:"North Carolina",description:"State-specific actions",icon:"\uD83C\uDFD4️",count:43},{id:"michigan",label:"Michigan",description:"State-specific actions",icon:"\uD83D\uDE97",count:38},{id:"arizona",label:"Arizona",description:"State-specific actions",icon:"\uD83C\uDF35",count:32},{id:"massachusetts",label:"Massachusetts",description:"State-specific actions",icon:"⚓",count:29},{id:"colorado",label:"Colorado",description:"State-specific actions",icon:"\uD83C\uDFD4️",count:27},{id:"oregon",label:"Oregon",description:"State-specific actions",icon:"\uD83C\uDF32",count:24},{id:"virginia",label:"Virginia",description:"State-specific actions",icon:"\uD83C\uDFDB️",count:21},{id:"new_jersey",label:"New Jersey",description:"State-specific actions",icon:"\uD83C\uDFD6️",count:19},{id:"nevada",label:"Nevada",description:"State-specific actions",icon:"\uD83C\uDFB0",count:16},{id:"maryland",label:"Maryland",description:"State-specific actions",icon:"\uD83E\uDD80",count:15},{id:"minnesota",label:"Minnesota",description:"State-specific actions",icon:"❄️",count:13},{id:"wisconsin",label:"Wisconsin",description:"State-specific actions",icon:"\uD83E\uDDC0",count:12},{id:"missouri",label:"Missouri",description:"State-specific actions",icon:"\uD83C\uDF3E",count:11},{id:"alabama",label:"Alabama",description:"State-specific actions",icon:"\uD83C\uDFB5",count:9},{id:"national",label:"National",description:"Federal level actions",icon:"\uD83C\uDDFA\uD83C\uDDF8",count:567}];function T(){let[e,t]=(0,s.useState)(1),[a,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[d,x]=(0,s.useState)(""),[m,u]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1);(0,n.useRouter)();let{setCurrentIntent:g}=(0,r.f)(),{profile:y}=(0,N.x)(),f=(0,s.useCallback)(a=>{l(a),1===e&&t(2)},[e]),b=(0,s.useCallback)(a=>{c(a),2===e&&t(3)},[e]),v=(0,s.useCallback)(e=>{x(e)},[]),T=(0,s.useCallback)(()=>{e<3?t(e+1):E()},[e]),R=(0,s.useCallback)(()=>{e>1&&t(e-1)},[e]),E=(0,s.useCallback)(async()=>{if(a&&o){u(!0);try{let e=S.find(e=>e.id===a),t=k.find(e=>e.id===o),i=C.find(e=>e.id===d),s={intent:(null==e?void 0:e.label)||a,topic:(null==t?void 0:t.label)||o,location:(null==i?void 0:i.label)||d||"Not specified",timestamp:new Date().toISOString()};await g(s),h(!0)}catch(e){console.error("Error generating actions:",e)}finally{u(!1)}}},[a,o,d,g]),A=(0,s.useCallback)(()=>{t(1),l(""),c(""),x(""),h(!1),u(!1)},[]),P=()=>{switch(e){case 1:return a.length>0;case 2:return o.length>0;case 3:return!0;default:return!1}};if(p){let e=S.find(e=>e.id===a),t=k.find(e=>e.id===o),s=C.find(e=>e.id===d),n={intent:(null==e?void 0:e.label)||a,topic:(null==t?void 0:t.label)||o,location:(null==s?void 0:s.label)||d||"Not specified",timestamp:new Date().toISOString()};return(0,i.jsx)(j,{intentData:n,onBack:()=>h(!1),onReset:A})}return(0,i.jsxs)("div",{className:"w-full max-w-2xl mx-auto bg-card rounded-card border border-grayBorder p-8",children:[(0,i.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,i.jsx)("div",{className:"flex items-center space-x-4",children:[1,2,3].map(t=>(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(t<=e?"bg-primary text-white":"bg-gray-200 text-gray-500"),children:t}),t<3&&(0,i.jsx)("div",{className:"w-12 h-1 mx-2 ".concat(t<e?"bg-primary":"bg-gray-200")})]},t))})}),(0,i.jsxs)("div",{className:"space-y-6",children:[1===e&&(0,i.jsxs)("div",{className:"text-center space-y-4",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-text",children:"What do you want to do?"}),(0,i.jsx)("p",{className:"text-grayText",children:"Choose your goal or intention"}),(0,i.jsx)(w.A,{options:S,value:a,onChange:f,placeholder:"Select an action type",searchable:!1}),(0,i.jsx)("div",{className:"text-sm text-grayText",children:"Select from predefined action types to get started"})]}),2===e&&(0,i.jsxs)("div",{className:"text-center space-y-4",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-text",children:"What topic interests you?"}),(0,i.jsx)("p",{className:"text-grayText",children:"Choose an area you care about"}),(0,i.jsx)(w.A,{options:k,value:o,onChange:b,placeholder:"Select a topic",searchable:!0}),(0,i.jsx)("div",{className:"text-sm text-grayText",children:"Browse topics or search to find what matters to you"})]}),3===e&&(0,i.jsxs)("div",{className:"text-center space-y-4",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-text",children:"Where are you located?"}),(0,i.jsx)("p",{className:"text-grayText",children:"Help us find relevant local actions (optional)"}),(0,i.jsx)(w.A,{options:C,value:d,onChange:v,placeholder:"Select your location",searchable:!0}),(0,i.jsx)("div",{className:"text-sm text-grayText",children:"Choose your state or select online/virtual for remote actions"})]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-8",children:[(0,i.jsx)("button",{onClick:R,disabled:1===e,className:"px-6 py-2 rounded-lg font-medium ".concat(1===e?"text-gray-400 cursor-not-allowed":"text-primary hover:bg-primary/10 transition-colors"),children:"Back"}),(0,i.jsxs)("div",{className:"text-sm text-grayText",children:["Step ",e," of 3"]}),(0,i.jsx)("button",{onClick:T,disabled:!P()||m,className:"px-6 py-2 rounded-lg font-medium ".concat(P()&&!m?"bg-primary text-white hover:bg-primaryDark":"bg-gray-200 text-gray-400 cursor-not-allowed"," transition-colors"),children:m?"Loading...":3===e?"Find Actions":"Next"})]}),(a||o||d)&&(0,i.jsx)("div",{className:"text-center mt-6",children:(0,i.jsx)("button",{onClick:A,className:"text-sm text-grayText hover:text-text transition-colors",children:"Start over"})}),1===e&&(0,i.jsxs)("div",{className:"mt-8 pt-6 border-t border-grayBorder",children:[(0,i.jsx)("p",{className:"text-sm text-grayText text-center mb-4",children:"Quick start options:"}),(0,i.jsxs)("div",{className:"flex flex-wrap justify-center gap-2",children:[(0,i.jsx)("button",{onClick:()=>{l("volunteer"),t(2)},className:"px-3 py-1 text-sm bg-primary/10 text-primary rounded-full hover:bg-primary/20 transition-colors",children:"\uD83E\uDD1D Volunteer"}),(0,i.jsx)("button",{onClick:()=>{l("be_heard"),t(2)},className:"px-3 py-1 text-sm bg-primary/10 text-primary rounded-full hover:bg-primary/20 transition-colors",children:"\uD83D\uDCE2 Be Heard"})]})]})]})}},5063:(e,t,a)=>{"use strict";a.d(t,{Ew:()=>s});class i{static getInstance(e){return i.instance||(i.instance=new i(e)),i.instance}async validateRoute(e){try{if(!e||"/"===e||!e.startsWith("/"))return!1;return["/main","/explore","/tool","/profile","/admin","/action"].some(t=>e===t||e.startsWith(t+"/"))}catch(e){return console.warn("Route validation failed:",e),!1}}safeEncodeURIComponent(e){try{if(!e||"string"!=typeof e)return"";return encodeURIComponent(e.trim())}catch(t){return console.warn("URI encoding failed:",e,t),e.replace(/[^a-zA-Z0-9-_.~]/g,"")}}buildActionRoute(e){try{let{intent:t,topic:a,location:i}=e;if(!t||!a)return console.warn("Missing required route parameters:",e),null;let s=this.safeEncodeURIComponent(t),n=this.safeEncodeURIComponent(a);if(!s||!n)return console.warn("Failed to encode route parameters:",e),null;let r="/action/".concat(s,"/").concat(n);if(i&&i.trim()){let e=this.safeEncodeURIComponent(i);e&&(r+="?location=".concat(e))}return r}catch(t){return console.error("Route building failed:",e,t),null}}async navigateWithRetry(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{replace:i=!1,scroll:s=!0}=a;for(let a=0;a<=this.config.retryAttempts;a++)try{return await this.validateRoute(t)||(console.warn("Invalid route detected: ".concat(t,", using fallback")),t=this.config.fallbackRoute),i?e.replace(t,{scroll:s}):e.push(t,{scroll:s}),!0}catch(t){if(console.warn("Navigation attempt ".concat(a+1," failed:"),t),a<this.config.retryAttempts){await this.delay(this.retryDelays[a]||500);continue}try{console.error("All navigation attempts failed, using emergency fallback"),e.replace(this.config.fallbackRoute);break}catch(e){console.error("Emergency fallback navigation failed:",e);break}}return!1}async smartPrefetch(e,t){if(this.config.enablePrefetch)try{if(!await this.validateRoute(t))return void console.warn("Skipping prefetch for invalid route: ".concat(t));e&&"function"==typeof e.prefetch&&t&&await Promise.race([e.prefetch(t),this.delay(this.config.timeout)])}catch(e){console.warn("Prefetch failed (non-critical):",t,e)}}async navigateToAction(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{let i=this.buildActionRoute(t);if(!i)return console.error("Failed to build action route, using fallback"),this.navigateWithRetry(e,"/tool");return!1!==a.prefetch&&this.config.enablePrefetch&&this.smartPrefetch(e,i).catch(()=>{}),this.navigateWithRetry(e,i,{replace:a.replace,scroll:!0})}catch(a){return console.error("Action navigation failed:",t,a),this.navigateWithRetry(e,"/tool")}}async navigateTo(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{let i=t;if(a.params&&a.params.toString()){let e=t.includes("?")?"&":"?";i="".concat(t).concat(e).concat(a.params.toString())}return!1!==a.prefetch&&this.config.enablePrefetch&&this.smartPrefetch(e,i).catch(()=>{}),this.navigateWithRetry(e,i,{replace:a.replace,scroll:!0})}catch(a){return console.error("Navigation failed:",t,a),this.navigateWithRetry(e,this.config.fallbackRoute)}}emergencyNavigate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/main";try{window.location.href=e}catch(e){console.error("Emergency navigation failed:",e),window.location.reload()}}delay(e){return new Promise(t=>setTimeout(t,e))}parseSearchParams(e){let t={};try{e&&e.forEach((e,a)=>{e&&a&&(t[a]=decodeURIComponent(e))})}catch(e){console.warn("Search params parsing failed:",e)}return t}updateConfig(e){this.config={...this.config,...e}}constructor(e={}){this.retryDelays=[100,300,500],this.config={enablePrefetch:!0,retryAttempts:2,timeout:5e3,fallbackRoute:"/main",...e}}}let s=i.getInstance()},5695:(e,t,a)=>{"use strict";var i=a(8999);a.o(i,"usePathname")&&a.d(t,{usePathname:function(){return i.usePathname}}),a.o(i,"useRouter")&&a.d(t,{useRouter:function(){return i.useRouter}})},7088:(e,t,a)=>{Promise.resolve().then(a.bind(a,2679))},9849:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var i=a(5155),s=a(2115),n=a(4879),r=a(1793);function l(e){let{options:t,value:a,onChange:l,placeholder:o="Select option",label:c,searchable:d=!0,disabled:x=!1,className:m=""}=e,[u,p]=(0,s.useState)(!1),[h,g]=(0,s.useState)(""),y=(0,s.useRef)(null),f=(0,s.useRef)(null),b=s.useMemo(()=>h.trim()?t.filter(e=>{var t;return e.label.toLowerCase().includes(h.toLowerCase())||(null==(t=e.description)?void 0:t.toLowerCase().includes(h.toLowerCase()))}):t,[t,h]),v=t.find(e=>e.id===a);return(0,s.useEffect)(()=>{let e=e=>{y.current&&!y.current.contains(e.target)&&(p(!1),g(""))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,s.useEffect)(()=>{u&&d&&f.current&&f.current.focus()},[u,d]),(0,i.jsxs)("div",{ref:y,className:"relative ".concat(m),children:[c&&(0,i.jsx)("label",{className:"block text-sm font-medium text-text mb-2",children:c}),(0,i.jsxs)("button",{type:"button",onClick:()=>{x||p(!u)},disabled:x,className:"\n          w-full p-3 bg-white border border-grayBorder rounded-lg \n          focus:outline-none focus:ring-2 focus:ring-primary \n          text-left flex items-center justify-between\n          ".concat(x?"bg-gray-50 cursor-not-allowed":"hover:border-primary cursor-pointer","\n          ").concat(u?"border-primary ring-2 ring-primary":"","\n        "),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(null==v?void 0:v.icon)&&(0,i.jsx)("span",{className:"text-lg",children:v.icon}),(0,i.jsx)("div",{className:"flex-1 min-w-0",children:v?(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"font-medium text-text truncate",children:[v.label,void 0!==v.count&&(0,i.jsxs)("span",{className:"ml-2 text-sm text-grayText",children:["(",v.count,")"]})]}),v.description&&(0,i.jsx)("div",{className:"text-sm text-grayText truncate",children:v.description})]}):(0,i.jsx)("span",{className:"text-grayText",children:o})})]}),(0,i.jsx)("svg",{className:"w-5 h-5 text-grayText transition-transform ".concat(u?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,i.jsx)(n.N,{children:u&&(0,i.jsx)(r.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(0,i.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-grayBorder rounded-lg shadow-lg max-h-64 overflow-hidden",children:[d&&(0,i.jsx)("div",{className:"p-3 border-b border-grayBorder",children:(0,i.jsx)("input",{ref:f,type:"text",value:h,onChange:e=>g(e.target.value),placeholder:"Search options...",className:"w-full p-2 text-sm border border-grayBorder rounded focus:outline-none focus:ring-1 focus:ring-primary"})}),(0,i.jsx)("div",{className:"max-h-48 overflow-y-auto",children:b.length>0?b.map(e=>(0,i.jsxs)("button",{type:"button",onClick:()=>{l(e.id),p(!1),g("")},className:"\n                      w-full p-3 text-left hover:bg-gray-50 flex items-center gap-3\n                      ".concat(a===e.id?"bg-primary/5 border-r-2 border-primary":"","\n                      transition-colors\n                    "),children:[e.icon&&(0,i.jsx)("span",{className:"text-lg flex-shrink-0",children:e.icon}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"font-medium text-text truncate",children:e.label}),void 0!==e.count&&(0,i.jsx)("span",{className:"text-sm text-grayText ml-2",children:e.count})]}),e.description&&(0,i.jsx)("div",{className:"text-sm text-grayText truncate",children:e.description})]}),a===e.id&&(0,i.jsx)("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.id)):(0,i.jsx)("div",{className:"p-3 text-center text-grayText",children:"No options found"})})]})})})]})}}},e=>{e.O(0,[793,647,338,674,822,441,964,358],()=>e(e.s=7088)),_N_E=e.O()}]);